<!DOCTYPE html>
<html lang="ja">
<head>
<meta charset="UTF-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width">
<title>社員紹介応募フォーム</title>
<meta name="description" content="">
<meta name="format-detection" content="telephone=no">
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/purecss@3.0.0/build/pure-min.css" integrity="sha384-X38yfunGUhNzHpBaEBsWLO+A0HDYOQi8ufWDkZ0k9e0eXz/tH3II7uKZ9msv++Ls" crossorigin="anonymous">
<link rel="preconnect" href="https://fonts.googleapis.com">
<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
<link href="https://fonts.googleapis.com/css2?family=Noto+Sans+JP:wght@100..900&family=Noto+Serif+JP:wght@200..900&family=Poppins:wght@400;500&display=swap" rel="stylesheet">
<link rel="stylesheet" type="text/css" href="//cdn.jsdelivr.net/npm/slick-carousel@1.8.1/slick/slick.css">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css">
<link rel="stylesheet" href="css/recruit.css?v8">
<link rel="stylesheet" href="css/entry.css?v2">
<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.6.4/jquery.min.js"></script> 
<script type="text/javascript" src="//cdn.jsdelivr.net/npm/slick-carousel@1.8.1/slick/slick.min.js"></script>
</head>
<body>
<video id="bg_video" src="kv_mv_sp.mp4" autoplay muted playsinline loop></video>
<div class="outline_wrap">
  <div id="fixed_btn"><a href="">応募フォームへ</a></div>
</div>
<div class="entry_wrap">
  <section id="form">
    <h2 id="formTitle">入力フォーム</h2>
    <button id="entryClose"><i class="fa-solid fa-xmark"></i></button>
    <form id="myForm">
      <!-- 入力フォーム -->
      <div class="table_wrap input-container">
        <p>ご紹介いただくお客様の情報を教えてください</p>
        <table cellpadding="0" cellspacing="0">
          <tr>
          <th>会社名<br>またはお名前のみ</th>
          <td>
            <input type="text" name="company" value="鈴木鉄工所">
          </td>
          </tr>
          <tr>
          <th>お名前 <span class="required-mark">※必須</span></th>
          <td>
            <div class="input-with-suffix">
            <input type="text" name="name" value="鈴木">
            <span class="suffix">様</span>
            </div>
            <div class="required-mark error-message" id="name_error" hidden>※お名前を入力してください</div>
      
          </td>
          </tr>
          <tr>
          <th>メールアドレス</th>
          <td><input type="email" name="email" value="suzuki@abcd.co.jp"></td>
          </tr>
          <tr>
          <th>電話番号 <span class="required-mark">※必須</span></th>
          <td>
            <input type="tel" name="phone" value="080-9876-5432">
            <div class="required-mark error-message" id="phone_error" hidden>※電話番号を入力してください</div>
          </td>
          </tr>
          <tr>
          <th>土地住所 <span class="required-mark">※必須</span></th>
          <td>
            <input type="text" name="address" value="名古屋市緑区">
            <div class="required-mark error-message" id="address_error" hidden>※土地住所を入力してください</div>
          </td>
          </tr>
          <tr>
          <th>現在の状況等</th>
          <td><textarea name="notes" placeholder="その他ご要望事項などがあればご入力してください。"></textarea></td>
          </tr>
        </table>
      
        <p>ご紹介先の状況について教えてください。<span class="required-mark">※必須</span></p>
        <div class="radio-group">
          <label><input type="radio" name="situation" checked>所有する空き地の活用方法を検討している</label>
          <label><input type="radio" name="situation">既存の建物が建っているが活用方法を検討している</label>
          <label><input type="radio" name="situation">賃貸物件を所有しているが老朽化に悩んでいる</label>
          <label><input type="radio" name="situation">その他</label>
          <div class="required-mark error-message" id="situation_error" hidden>※状況を選択してください</div>
        </div>
      
        <p>下記に当てはまる項目がありましたら、選択ください。</p>
        <div class="radio-group">
          <label><input type="radio" name="interest" checked>当社の商品紹介パンフレットが欲しい</label>
          <label><input type="radio" name="interest">図面を提案して欲しい</label>
          <label><input type="radio" name="interest">収支を提案して欲しい</label>
          <div class="required-mark error-message" id="interest_error" hidden>※項目を選択してください</div>
        </div>
      
        <div class="checkbox-group">
          <label>
          <input type="checkbox" name="consent" id="consent">
          ご紹介いただくことについて、ご紹介先の了承を得ていらっしゃいますか？
          <span class="required-mark">※必須</span>
          </label>
          <div class="required-mark error-message" id="consent_error" hidden>※紹介の了承が必要です</div>
        </div>
      </div>

      <!-- 確認画面テンプレート -->
      <div class="confirmation-container" hidden>
        <p>ご記入いただくお客様の情報を教えてください。</p>
        <div class="confirmation-fields">
        <div class="confirmation-field" data-field="company">
          <div class="confirmation-label">会社名</div>
          <div class="confirmation-value"></div>
        </div>
        <div class="confirmation-field" data-field="name">
          <div class="confirmation-label">お名前</div>
          <div class="confirmation-value"></div>
        </div>
        <div class="confirmation-field" data-field="email">
          <div class="confirmation-label">メールアドレス</div>
          <div class="confirmation-value"></div>
        </div>
        <div class="confirmation-field" data-field="phone">
          <div class="confirmation-label">電話番号</div>
          <div class="confirmation-value"></div>
        </div>
        <div class="confirmation-field" data-field="address">
          <div class="confirmation-label">土地住所</div>
          <div class="confirmation-value"></div>
        </div>
        <div class="confirmation-field" data-field="notes">
          <div class="confirmation-label">現在の状況等</div>
          <div class="confirmation-value"></div>
        </div>
        <div class="confirmation-field" data-field="situation">
          <div class="confirmation-label">ご紹介先の状況</div>
          <div class="confirmation-value"></div>
        </div>
        <div class="confirmation-field" data-field="interest">
          <div class="confirmation-label">希望項目</div>
          <div class="confirmation-value"></div>
        </div>
        <div class="confirmation-field" data-field="consent">
          <div class="confirmation-label">紹介の了承</div>
          <div class="confirmation-value"></div>
        </div>
        </div>
      </div>

      <!-- ボタングループ -->
      <div class="button-group">
        <button type="button" id="confirm">入力内容の確認画面へ</button>
        <button type="button" id="correct" hidden>修正する</button>
        <button type="button" id="submit" hidden>この内容で応募する</button>
      </div>
    </form>
  </section>
</div>
	<!--<div id="debug" style="position: fixed; top:5px; left:5px; z-index: 1000; color: #f00;"></div>-->
<iframe name="hidden_iframe" id="hidden_iframe" style="display:none;"></iframe>
<!--JStream動画設定ここから--> 
<script src="https://ssl-cache.stream.ne.jp/www50/eqd145gamd/jmc_pub/jmc_swf/player/t3/obj.js" charset="UTF-8"></script> 
<script src="https://webcdn.token.co.jp/www08/token/cmn/js/jquery_jstream_movie_player.js" charset="UTF-8"></script> 
<script>
var player = new JMoviePlayer();

player.setUseVideo(true);
player.setVideoUrl("#video","movie/saiyo.mp4");
player.setVideoUrl("#video2","movie/syohin.mp4");
player.setVideoUrl("#video3","movie/kaisya.mp4");

/*
player.setJMovie("#video","MjA4Mg==");
player.setJMovie("#video2","MjA4MQ==");
player.setJMovie("#video3","MjA4MQ==");
*/
</script> 
<!--JStream動画設定ここまで--> 
<script>
	$(document).ready(function() {
		$('#summary h2').click(function() {
			var $toggleBox = $('.toggle_box');
			var $summary = $('#summary');
			var $table = $toggleBox.find('table');

			if ($summary.hasClass('open')) {
				$toggleBox.css('height', '0px');
				$summary.removeClass('open');
			} else {
				var autoHeight = $table.outerHeight(true);
				$toggleBox.css('height', autoHeight + 'px');
				$summary.addClass('open');
			}
		});
		$('#flow h2').click(function() {
			var $toggleBox = $('.toggle_box2');
			var $flow = $('#flow');
			var $ol = $toggleBox.find('ol');

			if ($flow.hasClass('open')) {
				$toggleBox.css('height', '0px');
				$flow.removeClass('open');
			} else {
				var autoHeight = $ol.outerHeight(true);
				$toggleBox.css('height', autoHeight + 'px');
				$flow.addClass('open');
			}
		});
		
		$('.slider').slick({
			centerMode: true,
			centerPadding: '80px',
			slidesToShow: 1,
			infinite: false,
			prevArrow: '<div class="slick-prev"><i class="fa-solid fa-arrow-left"></i></div>',
			nextArrow: '<div class="slick-next"><i class="fa-solid fa-arrow-right"></i></div>',
			responsive: [
				{
					breakpoint: 860,
					settings: {
						centerPadding: '10.233vw',
					}
				}
			]
		});
		
		$('#entryClose').click(function() {
			$('body').removeClass('entry_open');
		});
		$('#fixed_btn a').click(function() {
			$('body').addClass('entry_open');
			return false;
		});
		
		// ビューポートの高さを取得
		const viewportHeight = $(window).height();

		let ticking = false;

		function onScroll() {
			// 現在のスクロール位置を計算
			const scrollTop = $(window).scrollTop();
			const documentHeight = $(document).height();
			const windowHeight = $(window).height();

			// すべての .outline_wrap 要素を選択
			$('.outline_wrap').each(function() {
				// スクロール位置に基づいて不透明度を計算
				const opacity = Math.min(1, Math.max(0, scrollTop / viewportHeight * 0.83));

				// 計算された不透明度で背景色を更新
				$(this).css('background-color', `rgba(255, 255, 255, ${opacity})`);
			});
			
			// 要素にスクロール位置に基づいてクラスを付与
			$('section .viewElem, section .viewElemVideo, section .viewElemImg').each(function() {
				const elementTop = $(this).offset().top;
				if (scrollTop + viewportHeight * (4 / 5) > elementTop && scrollTop < elementTop + $(this).outerHeight()) {
					$(this).addClass('visible');
				} else {
					//$(this).removeClass('visible');
				}
			});
			
			let scrollBottom = (scrollTop + windowHeight) * 1.06;
			//$('#debug').html(scrollBottom + ">" + documentHeight);
			// スクロールが最下部に接していたらem要素を全て表示状態にする
    	if (scrollBottom >= documentHeight) {
        $('section .viewElem').addClass('visible');
			}
			
			// #bg_videoタグのblur値をスクロールに応じて変更
			const blurValue = Math.min(12, Math.max(0, scrollTop / viewportHeight * 12)); // blur値を0から10の範囲で計算
    	//$('#bg_video').css('filter', `blur(${blurValue}px)`);
			
			ticking = false;
		}

		// ページロード時に初期状態を設定
		onScroll();

		$(window).on('scroll', function() {
			if (!ticking) {
				ticking = true;
				window.requestAnimationFrame(onScroll);
			}
		});
		
		$('a[href^="#"]').click(function() {
			var speed = 700; // スクロールの速度（ミリ秒）
			var href = $(this).attr("href");
			var target = $(href == "#" || href == "" ? 'html' : href);
			var position = target.offset().top;
			$('body,html').animate({scrollTop: position}, speed, 'swing');
			return false;
		});
	});
	
	(function() {
		// Check if the device is in portrait mode
		if (window.matchMedia("(orientation: portrait)").matches) {
			// Check if the device width is 860px or more
			if (window.innerWidth >= 860) {
				// Find the existing viewport meta tag
				var viewportMeta = document.querySelector('meta[name="viewport"]');
				if (viewportMeta) {
					// Update the content attribute to set the width to 860px
					viewportMeta.setAttribute('content', 'width=860');
				}
			}
		}
	})();
</script> 
<script type="module" src="js/main.js"></script>
</body>
</html>
